<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.moodtracker.mapper.UsersMapper">
	
	<select id="getUser" parameterType="hashMap" resultType="kr.co.moodtracker.vo.UserVO">
		SELECT user_id
			,username
			,email
		FROM users
		WHERE 1=1
		AND	username = #{username}
		AND password_hash = #{password}
	</select>
	
	<insert id="postUser" parameterType="kr.co.moodtracker.vo.UserVO"
			useGeneratedKeys="true" keyProperty="userId">
		INSERT users (
			username, password_hash, email 
		) VALUES ( 
			#{username}, #{password}, #{email} 
		)
	</insert>
	
	<insert id="postUserProfile" parameterType="kr.co.moodtracker.vo.UserVO">
		INSERT user_profile (
			user_id, nickname, image_path, `description`
		) VALUES ( 
			#{userId}, #{nickname}, null, null 
		)
	</insert>

</mapper>